{% extends "base.html" %}
{% block title %}My Attendance{% endblock %}
{% block content %}
<div class="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 p-12">

  <!-- Page Header -->
  <div class="flex flex-col md:flex-row items-center justify-between mb-12">
    <h1 class="text-6xl font-extrabold text-indigo-700 drop-shadow-xl flex items-center gap-4">
      📅 My Attendance
    </h1>
    <a href="{% url 'attendance_create' %}" 
       class="mt-6 md:mt-0 px-10 py-5 bg-indigo-600 text-white text-2xl font-bold rounded-3xl shadow-2xl hover:bg-indigo-700 hover:scale-105 transition transform">
      ➕ Add Record
    </a>
  </div>

  {% if records %}
    <!-- Attendance Table -->
    <div class="overflow-x-auto bg-white rounded-3xl shadow-3xl border-2 border-gray-300">
      <table class="min-w-full divide-y-2 divide-gray-200 text-xl">
        <thead class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-2xl">
          <tr>
            <th class="px-8 py-6 text-left font-bold">#</th>
            <th class="px-8 py-6 text-left font-bold">Date</th>
            <th class="px-8 py-6 text-left font-bold">Status</th>
            <th class="px-8 py-6 text-left font-bold">Note</th>
            <th class="px-8 py-6 text-right font-bold">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200 text-gray-800">
          {% for rec in records %}
            <tr class="hover:bg-indigo-50 transition transform hover:scale-[1.02]">
              <td class="px-8 py-6 font-bold">{{ forloop.counter }}</td>
              <td class="px-8 py-6">{{ rec.date }}</td>
              <td class="px-8 py-6">
                {% if rec.status == 'Present' %}
                  <span class="px-6 py-3 bg-green-100 text-green-800 text-lg font-bold rounded-full shadow-lg">
                    ✅ Present
                  </span>
                {% else %}
                  <span class="px-6 py-3 bg-red-100 text-red-800 text-lg font-bold rounded-full shadow-lg">
                    ❌ Absent
                  </span>
                {% endif %}
              </td>
              <td class="px-8 py-6 italic text-gray-600">{{ rec.note|default:"—" }}</td>
              <td class="px-8 py-6 text-right space-x-6">
                <a href="{% url 'attendance_update' rec.pk %}" 
                   class="inline-flex items-center px-6 py-3 bg-yellow-100 text-yellow-800 rounded-2xl text-lg font-bold hover:bg-yellow-200 hover:scale-105 shadow-lg transition transform">
                  ✏️ Edit
                </a>

                <form method="post" action="{% url 'attendance_delete' rec.pk %}" class="inline">
                  {% csrf_token %}
                  <button type="submit" 
                          class="inline-flex items-center px-6 py-3 bg-red-100 text-red-800 rounded-2xl text-lg font-bold hover:bg-red-200 hover:scale-105 shadow-lg transition transform"
                          onclick="return confirm('Delete this record?');">
                    🗑️ Delete
                  </button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <!-- Empty State -->
    <div class="bg-gradient-to-r from-gray-50 to-gray-100 p-20 rounded-3xl shadow-3xl text-center border-2 border-gray-300">
      <p class="text-gray-600 text-3xl mb-8">No attendance records found.</p>
      <a href="{% url 'attendance_create' %}" 
         class="inline-block px-10 py-5 bg-indigo-600 text-white text-2xl font-bold rounded-3xl shadow-2xl hover:bg-indigo-700 hover:scale-105 transition transform">
        ➕ Add Your First Record
      </a>
    </div>
  {% endif %}
</div>
{% endblock %}
